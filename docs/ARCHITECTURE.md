# Arcella: Modular WebAssembly Runtime  
**–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π, –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∏ –¥–∏–Ω–∞–º–∏—á–Ω—ã–π runtime –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ WebAssembly**  
*–í–¥–æ—Ö–Ω–æ–≤–ª–µ–Ω–æ OSGi –∏ Apache Karaf ‚Ä¢ –ü–æ—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ Wasmtime*

---

## üéØ –¶–µ–ª—å

–°–æ–∑–¥–∞—Ç—å **–º–æ–¥—É–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**, –≤ –∫–æ—Ç–æ—Ä–æ–º –º–æ–∂–Ω–æ:

- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å `.wasm`-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã  
- –£–ø—Ä–∞–≤–ª—è—Ç—å –∏—Ö –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º (`install`, `start`, `stop`, `update`, `remove`)  
- –û–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å **–∏–∑–æ–ª—è—Ü–∏—é –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**  
- –ü–æ–∑–≤–æ–ª—è—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ **—Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**  
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å **CLI/Shell** –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å **–ø–µ—Ä–µ–Ω–æ—Å–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: –º–æ–¥—É–ª—å –æ–ø–∏—Å—ã–≤–∞–µ—Ç *—á—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç*, –∞ —Å—Ä–µ–¥–∞ ‚Äî *–∫–∞–∫ –µ–≥–æ –∑–∞–ø—É—Å–∫–∞—Ç—å*  
- –†–∞–∑–¥–µ–ª—è—Ç—å **–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–π –º–∞–Ω–∏—Ñ–µ—Å—Ç** (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ) –∏ **—Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–æ—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å** (–∏–∑–æ–ª—è—Ü–∏—è, –¥–æ–≤–µ—Ä–∏–µ, –≥—Ä—É–ø–ø–∞)

---

## üß© –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **Arcella –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –¥–µ–º–æ–Ω**  
2. **–ì–∏–±—Ä–∏–¥–Ω–∞—è –º–æ–¥–µ–ª—å –∏–∑–æ–ª—è—Ü–∏–∏**:  
   - –î–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ async-–º–æ–¥—É–ª–∏ ‚Äî –≤ –æ—Å–Ω–æ–≤–Ω–æ–º tokio-–ø–æ—Ç–æ–∫–µ  
   - –ù–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∏–ª–∏ sync-–º–æ–¥—É–ª–∏ ‚Äî –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö `arcella-worker` –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö  
3. **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –º–æ–¥—É–ª–µ–π** –≤ worker‚Äô—ã –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤  
4. **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** —á–µ—Ä–µ–∑ ALME (Arcella Local Management Extensions)  
5. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö (WASI), —Ç–∞–∫ –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö (Component Model + WIT) –º–æ–¥—É–ª–µ–π**
6. **–ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –ø–æ–ª–∏—Ç–∏–∫–∏ –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**
---

## üèóÔ∏è –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Arcella (main process)               ‚îÇ
‚îÇ                                                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ   ALME      ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ      ArcellaRuntime       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ (Unix sock) ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ                 ‚îÇ
‚îÇ                                    ‚îÇ                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ           Trusted Async Modules              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  (–∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ)    ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                    ‚îÇ                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ            WorkerManager                     ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ          ‚îÇ                       ‚îÇ                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ  ‚îÇ arcella-     ‚îÇ        ‚îÇ arcella-     ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ worker       ‚îÇ        ‚îÇ worker       ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ (group=core) ‚îÇ        ‚îÇ (group=ext)  ‚îÇ          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ          ‚îÇ                       ‚îÇ                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ  ‚îÇ Module A     ‚îÇ        ‚îÇ Module X     ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ Module B     ‚îÇ        ‚îÇ Module Y     ‚îÇ          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### üì¶ –ú–∞–Ω–∏—Ñ–µ—Å—Ç—ã: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–π –∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–æ—á–Ω—ã–π

Arcella –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–¥–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞** (—Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏), —Ä–∞–∑–¥–µ–ª—è—é—â–∏—Ö **–æ–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª—è** –∏ **–ø–æ–ª–∏—Ç–∏–∫—É –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**.

### 1. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–π –º–∞–Ω–∏—Ñ–µ—Å—Ç** (`component.toml`)
–û–ø–∏—Å—ã–≤–∞–µ—Ç **—Å–∞–º –º–æ–¥—É–ª—å** ‚Äî –µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ. –≠—Ç–æ—Ç —Ñ–∞–π–ª:
- –Ø–≤–ª—è–µ—Ç—Å—è **—á–∞—Å—Ç—å—é –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞ –º–æ–¥—É–ª—è**,
- –ú–æ–∂–µ—Ç –±—ã—Ç—å **–æ–ø—É—â–µ–Ω** –¥–ª—è WebAssembly Component Model (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ `.wasm`),
- **–û–±—è–∑–∞—Ç–µ–ª–µ–Ω** –¥–ª—è WASI-–º–æ–¥—É–ª–µ–π (—É –Ω–∏—Ö –Ω–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤).

–ü—Ä–∏–º–µ—Ä (`component.toml`):
```toml
[component]
name = "http-logger"
version = "0.1.0"
description = "Logs HTTP requests"
exports = ["logger:log@1.0"]
imports = ["wasi:http/incoming-handler@0.2.0"]
```

### 2. **–†–∞–∑–≤—ë—Ä—Ç—ã–≤–æ—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å** (`deployment.toml`)
–û–ø–∏—Å—ã–≤–∞–µ—Ç **–∫–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å –º–æ–¥—É–ª—å –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ä–µ–¥–µ**. –≠—Ç–æ—Ç —Ñ–∞–π–ª:
- **–ù–µ –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å –º–æ–¥—É–ª–µ–º**,
- –°–æ–∑–¥–∞—ë—Ç—Å—è **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º** –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ,
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –∏–∑–æ–ª—è—Ü–∏–µ–π, –¥–æ–≤–µ—Ä–∏–µ–º –∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏.

–ü—Ä–∏–º–µ—Ä (`deployment.toml`):
```toml
[deployment]
isolation = "worker"
trusted = false
async = true
group = "web"

[startup]
entrypoint = "start"
shutdown = "stop"
```

> üí° **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ**: –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ `.wasm` + `component.toml` –º–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤ dev-—Å—Ä–µ–¥–µ (`isolation = "main"`) –∏ prod (`isolation = "worker"`), –ø—Ä–æ—Å—Ç–æ –∏–∑–º–µ–Ω–∏–≤ `deployment.toml`.
---

## üîå –ú–µ—Ö–∞–Ω–∏–∑–º—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

| –°—Ü–µ–Ω–∞—Ä–∏–π | –ú–µ—Ö–∞–Ω–∏–∑–º | –ü—Ä–æ—Ç–æ–∫–æ–ª |
|--------|--------|--------|
| **Main ‚Üî Main** | –ü—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã —á–µ—Ä–µ–∑ `Arc<RwLock<...>>` –∏–ª–∏ `tokio::sync::mpsc` | Rust-—Ç–∏–ø—ã (zero-cost) |
| **Main ‚Üî Worker** | IPC —á–µ—Ä–µ–∑ Unix-—Å–æ–∫–µ—Ç –∏–ª–∏ stdin/stdout | MessagePack / JSON / Cap‚Äôn Proto |
| **Worker ‚Üî Worker** | –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Main (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ –ø—Ä—è–º–æ–π —Å–æ–∫–µ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) | –¢–æ—Ç –∂–µ, —á—Ç–æ Main ‚Üî Worker |

> üí° –í—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏ **–æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ WIT** –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `wit-bindgen`.

---

## üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
arcella/                              # –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ (workspace)
‚îÇ
‚îú‚îÄ‚îÄ Cargo.toml                        # [workspace] ‚Äî –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ crate'—ã
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ LICENSE-APACHE
‚îú‚îÄ‚îÄ LICENSE-MIT
‚îÇ
‚îú‚îÄ‚îÄ alme-proto/                       # üì¶ –û–±—â–∏–π crate: –ø—Ä–æ—Ç–æ–∫–æ–ª ALME
‚îÇ   ‚îú‚îÄ‚îÄ Cargo.toml
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îî‚îÄ‚îÄ lib.rs                    # AlmeRequest, AlmeResponse
‚îÇ
‚îú‚îÄ‚îÄ arcella/                          # üß† –û—Å–Ω–æ–≤–Ω–æ–π –¥–µ–º–æ–Ω (runtime)
‚îÇ   ‚îú‚îÄ‚îÄ Cargo.toml
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îú‚îÄ‚îÄ main.rs                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–µ–º–æ–Ω–∞
‚îÇ       ‚îú‚îÄ‚îÄ lib.rs                    # –≠–∫—Å–ø–æ—Ä—Ç –æ–±—â–∏—Ö —á–∞—Å—Ç–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ       ‚îú‚îÄ‚îÄ alme/                     # ALME-—Å–µ—Ä–≤–µ—Ä
‚îÇ       ‚îú‚îÄ‚îÄ runtime/                  # –û—Å–Ω–æ–≤–Ω–æ–π runtime, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—è–º–∏
‚îÇ       ‚îú‚îÄ‚îÄ config/                   # –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (~/.arcella/cfg/)
‚îÇ       ‚îú‚îÄ‚îÄ storage/                  # –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ (~/.arcella/modules/)
‚îÇ       ‚îú‚îÄ‚îÄ cache/                    # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
‚îÇ       ‚îú‚îÄ‚îÄ manifest/                 # –ü–∞—Ä—Å–∏–Ω–≥ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è component.toml –∏ deployment.toml
‚îÇ       ‚îú‚îÄ‚îÄ log/                      # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏
‚îÇ       ‚îî‚îÄ‚îÄ error/                    # –û–±—â–∏–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫
‚îÇ
‚îú‚îÄ‚îÄ arcella-cli/                      # üñ•Ô∏è CLI-–∫–ª–∏–µ–Ω—Ç (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ ALME)
‚îÇ   ‚îú‚îÄ‚îÄ Cargo.toml
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îî‚îÄ‚îÄ main.rs                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ CLI
‚îÇ
‚îú‚îÄ‚îÄ bin/
‚îÇ   ‚îî‚îÄ‚îÄ arcella-worker.rs             # –û—Ç–¥–µ–ª—å–Ω—ã–π –±–∏–Ω–∞—Ä–Ω–∏–∫ –¥–ª—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
‚îÇ
‚îî‚îÄ‚îÄ docs/
    ‚îú‚îÄ‚îÄ ARCHITECTURE.md
    ‚îî‚îÄ‚îÄ ...                           # –î—Ä—É–≥–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## ‚öôÔ∏è –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. **ALME (Arcella Local Management Extensions)**
- Unix-—Å–æ–∫–µ—Ç: `~/.arcella/alme`
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã: `install`, `start`, `stop`, `list`, `status`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON-RPC-–ø–æ–¥–æ–±–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç–æ—á–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è runtime‚Äô–æ–º

### 2. **ArcellaRuntime**
–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä:
- –•—Ä–∞–Ω–∏—Ç –∫–∞—Ä—Ç—É –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π (`HashMap<id, InstalledModule>`)
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º
- –°–æ–∑–¥–∞—ë—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –≤ `main` –∏–ª–∏ –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –≤ `WorkerManager`

### 3. **WorkerManager**
- –ó–∞–ø—É—Å–∫–∞–µ—Ç/–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å—ã `arcella-worker`
- –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç –º–æ–¥—É–ª–∏ –ø–æ –∏–º–µ–Ω–∏ –≥—Ä—É–ø–ø—ã
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç IPC —Å –¥–æ—á–µ—Ä–Ω–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

### 4. **arcella-worker (–æ—Ç–¥–µ–ª—å–Ω—ã–π –±–∏–Ω–∞—Ä–Ω–∏–∫)**
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è —á–µ—Ä–µ–∑ IPC
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **–æ–±—â–∏–π `wasmtime::Engine`** –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π –≤ –≥—Ä—É–ø–ø–µ
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `install`, `start`, `stop` –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
- –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –∏–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–æ–¥—É–ª–µ–π)

### 5. **Trusted Async Module (–≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ)**
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `trusted = true && async = true`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `wasmtime` –≤ **async-—Ä–µ–∂–∏–º–µ**
- –ò–º–µ–µ—Ç –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –¥—Ä—É–≥–∏–º –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º –º–æ–¥—É–ª—è–º
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–∞–π–º–∞—É—Ç—ã –∏ graceful shutdown —á–µ—Ä–µ–∑ `tokio::time::timeout`

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

| –£–≥—Ä–æ–∑–∞ | –ó–∞—â–∏—Ç–∞ |
|-------|--------|
| –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª | `store.set_fuel(N)` + –ª–æ–≤–ª—è `Trap` |
| –ë–ª–æ–∫–∏—Ä—É—é—â–∏–π I/O | –ó–∞–ø—É—Å–∫ –≤ `worker` + —Ç–∞–π–º–∞—É—Ç –Ω–∞ IPC |
| –ê–≤–∞—Ä–∏–π–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–æ–¥—É–ª—è | –ò–∑–æ–ª—è—Ü–∏—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ ‚Üí –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥–µ–º–æ–Ω |
| –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ —á–µ—Ä–µ–∑ `Config::static_memory_maximum_size()` |
| –ù–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∫–æ–¥ | –¢–æ–ª—å–∫–æ –≤ `worker`, –±–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É |

---

## üöÄ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –º–æ–¥—É–ª—è

1. **`install`**  
   - –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ `.wasm` –∏ `component.toml` (–µ—Å–ª–∏ –µ—Å—Ç—å) –≤ `~/.arcella/modules/<id>/`  
   - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ `deployment.toml` (–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ)  
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –ø—Ä–æ—Ñ–∏–ª—è  
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ `ArcellaRuntime`

2. **`start`**  
   - –ï—Å–ª–∏ `isolation = "main"` ‚Üí –∑–∞–ø—É—Å–∫ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ  
   - –ï—Å–ª–∏ `isolation = "worker"` ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π `arcella-worker`

3. **`stop`**  
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–≥–Ω–∞–ª–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏  
   - –û–∂–∏–¥–∞–Ω–∏–µ graceful shutdown (—Å —Ç–∞–π–º–∞—É—Ç–æ–º)  
   - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ (–µ—Å–ª–∏ worker)

4. **`update` / `remove`**  
   - –û—Å—Ç–∞–Ω–æ–≤–∫–∞ ‚Üí –∑–∞–º–µ–Ω–∞ —Ñ–∞–π–ª–∞ ‚Üí –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ (–¥–ª—è `update`)

---

## üìÖ –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ (MVP)

| –í–µ—Ä—Å–∏—è | –§–∏—á–∞ |
|-------|------|
| v0.1 | –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Å—Ç–æ–≥–æ WASI-–º–æ–¥—É–ª—è (sync) |
| v0.2 | ALME —á–µ—Ä–µ–∑ Unix-—Å–æ–∫–µ—Ç |
| v0.2.1 | –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| v0.2.2 | CLI-–∫–æ–Ω—Å–æ–ª—å —á–µ—Ä–µ–∑ ALME |
| v0.2.3 | –ú–∞–Ω–∏—Ñ–µ—Å—Ç—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ + WIT |
| v0.2.4 | –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ —Ñ–∞–π–ª–æ–≤ |
| v0.2.5 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —á–µ—Ä–µ–∑ ALME |
| v0.2.6 | –ú–µ–∂–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏ + –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ WIT –∏–∑ `.wasm` |
| v0.3.0 | –ì–æ—Ä—è—á–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ + –±–∞–∑–æ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å + –≥–∏–±—Ä–∏–¥–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è |

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–Ø–∑—ã–∫ —Ö–æ—Å—Ç–∞**: Rust 1.90+  
- **WASM Engine**: `wasmtime` v37+  
- **CLI**: `clap`  
- **Async Runtime**: `tokio`  
- **–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è**: `serde` + `serde_json` / `rmp-serde`  
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: `tracing` + `tracing-subscriber`  
- **–û—à–∏–±–∫–∏**: `thiserror`  
- **–ü—É—Ç–∏**: `dirs`  
- **–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–Ω—Ñ–∏–≥–æ–≤**: `toml`, `regex`

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**: –Ω–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∫–æ–¥ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω  
- **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏ –±–µ–∑ IPC  
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–µ—Å—É—Ä—Å–æ–≤**: –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –≤ worker‚Äô—ã  
- **–ì–∏–±–∫–æ—Å—Ç—å**: –≤—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è  
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ WASI, Component Model, sync/async  
- **–£–ø—Ä–∞–≤–ª—è–µ–º–æ—Å—Ç—å**: –µ–¥–∏–Ω—ã–π ALME-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ü–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**: –º–æ–¥—É–ª—å –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —Å—Ä–µ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è ‚Äî –ø–æ–ª–∏—Ç–∏–∫–∞ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –∑–∞–¥–∞—ë—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
---

> **Arcella ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ WASM-—Ä–∞–Ω—Ç–∞–π–º, –∞ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ä–µ–¥–∞ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è.**
